window.angular.module("NaverMaps",[]),function(){"use strict";var a,b=function(b){var c=a.defer();return navigator.geolocation?(void 0===b?b={timeout:5e3}:void 0===b.timeout&&(b.timeout=5e3),navigator.geolocation.getCurrentPosition(function(a){c.resolve(a)},function(a){console.error(a),c.reject(a)},b)):c.reject("Browser Geolocation service failed."),c.promise},c=function(c){return a=c,{getCurrentPosition:b}};c.$inject=["$q"],angular.module("NaverMaps").service("NavigatorGeolocation",c)}(),angular.module("NaverMaps").service("geolocator",["$q","NavigatorGeolocation",function(a,b){return{fallbackToIp:!0,defaultOptions:{enableHighAccuracy:!0,timeout:6e3,maximumAge:0},location:null,locate:function(c){var d=this,e=window.angular.extend(d.defaultOptions,c),f=d.fallbackToIp;return window.geolocator?a(function(a,b){window.geolocator.locate(a,b,f,e)}).then(function(a){return d.location=a,a}):b.getCurrentPosition()}}}]),angular.module("NaverMaps").factory("NgNaverMap",["$q",function(a){var b;try{b=window.nhn.api.map}catch(c){console.error("Naver Map API could not load, this may be due to bad Internet connection or API key being restricted to another domain"),console.error(c),b={}}var d={},e={Naver:b,initMap:function(a,c,d){var f=e.getLatLng(a.center),g=a.zoom,h=new b.Map(c[0],{point:f,zoom:g,enableWheelZoom:a.enableWheelZoom,enableDragPan:a.enableDragPan,enableDblClickZoom:a.enableDblClickZoom,mapMode:a.mapMode||0,activateTrafficMap:a.activateTrafficMap,activateBicycleMap:a.activateBicycleMap,minMaxLevel:a.minMaxLevel||[1,14],size:e.getSize(a.size,c)});if($(window).on("resize",function(b){h.setSize(e.getSize(a.size,c))}),h.attach("move",function(b){a.onCenterChanged(b)}),a.zoomControl){var i=new b.ZoomControl(a.zoomControlOptions);h.addControl(i)}return d.map=h,h},addMap:function(a){var b=Object.keys(d).length,c=a.map?a.map._getNum():b;d[c]=a,a.getMap=function(){return e.getMap(c)}},getMap:function(b){b="object"==typeof b?b._getNum():b,b=b||0;var c=a.defer(),e=d[b];return!e.map&&e.waitGeo?e.waitGeo.then(function(){c.resolve(e.map)})["catch"](c.reject):c.resolve(e.map),c.promise},getLatLng:function(a){var c=a;return a[0].constructor===Array?c=a.map(function(a){return new b.LatLng(a[0],a[1])}):!isNaN(parseFloat(a[0]))&&isFinite(a[0])&&(c=new b.LatLng(c[0],c[1])),c},getSize:function(a,c){var d="width"===a[0]?c.parent().width():a[0],e="height"===a[1]?c.parent().height():a[1];return new b.Size(d,e)}};return e}]),function(){angular.module("NaverMaps").directive("ngNaverMap",function(){return{restrict:"E",replace:!0,scope:{center:"=?",zoom:"=?",enableWheelZoom:"=?",enableDragPan:"=?",enableDblClickZoom:"=?",activateTrafficMap:"=?",activateBicycleMap:"=?",minMaxLevel:"=?",mapMode:"=?",size:"=?",zoomControl:"=?",zoomControlOptions:"=?",onCenterChanged:"&?",onClick:"&?"},controller:["$scope","$element","$attrs","$window","NgNaverMap","geolocator",function(a,b,c,d,e,f){var g=(e.Naver,this);e.addMap(g);var h=[37.5675451,126.9773356];a.center=a.center||h,"current-location"===a.center?g.waitGeo=f.locate().then(function(c){return a.center=[c.coords.latitude,c.coords.longitude],e.initMap(a,b,g)})["catch"](function(){return a.center=h,e.initMap(a,b,g)}):e.initMap(a,b,g),e.getMap().then(function(b){b.attach("click",function(){a.onClick()})})}]}})}(),function(){angular.module("NaverMaps").directive("ngNaverMapMarker",["NgNaverMap",function(NgNaverMap){return{scope:{title:"=?",data:"=?",model:"=?",position:"@?",onClick:"&?"},requires:"^?ngNaverMap",restrict:"E",link:function(scope,element,attrs,ngNaverMap){NgNaverMap.getMap().then(function(oMap){var Naver=NgNaverMap.Naver,oSize=new Naver.Size(28,37),oOffset=new Naver.Size(14,37),oIcon=new Naver.Icon("http://static.naver.com/maps2/icons/pin_spot2.png",oSize,oOffset),oLabel=new Naver.MarkerLabel;oLabel.setPosition({top:100}),oMap.addOverlay(oLabel);var oMarker=new Naver.Marker(oIcon,{title:scope.title});oMarker.setPoint(NgNaverMap.getLatLng(eval(scope.position))),oMap.addOverlay(oMarker),oMarker.attach("mouseenter",function(a){oLabel.setVisible(!0,oMarker)}),oMarker.attach("mouseleave",function(a){oLabel.setVisible(!1)}),oMarker.attach("click",function(){scope.onClick({model:scope.model})})})}}}])}(),function(){angular.module("NaverMaps").directive("ngNaverMapInfowindow",["NgNaverMap",function(NgNaverMap){return{scope:{index:"=",model:"=?",position:"@?",onClick:"&?"},requires:"^?ngNaverMap",restrict:"E",transclude:!0,link:function(scope,element,attrs,ngNaverMap,transclude){NgNaverMap.getMap().then(function(oMap){var Naver=NgNaverMap.Naver,oInfoWnd=new Naver.InfoWindow;oInfoWnd.setPoint(NgNaverMap.getLatLng(eval(scope.position))),oInfoWnd.setPosition({top:40}),oInfoWnd.setVisible(!1),oMap.addOverlay(oInfoWnd),scope.visible=!1,scope.$on("toggleInfoWindow",function(a,b){b===scope.index&&(scope.visible=!scope.visible,oInfoWnd.setVisible(scope.visible))}),scope.$on("closeInfoWindow",function(a,b){b===scope.index&&(scope.visible=!1,oInfoWnd.setVisible(!1))}),oInfoWnd.attach("click",function(){scope.onClick({model:scope.model})}),transclude(scope.$parent,function(a,b){for(var c=document.createElement("div"),d=0;d<a.length;d++)1===a[d].nodeType&&c.appendChild(a[d]);c.style.overflow="auto",c.className="ng-map-infowindow",oInfoWnd.setContent(c)})})}}}])}();